{# templates/category/category.html #}
{% extends 'master.html' %}
{% load static %}

{% block title %}{{ category.title }}{% endblock %}

{% block content %}
<div class="container py-4">

  <!-- Category Header -->
  <div class="text-center mb-5">
    <h1 class="display-4">{{ category.title }}</h1>
    {% if category.img %}
      <img src="{{ category.img.url }}" alt="{{ category.title }}" class="img-fluid rounded shadow mt-3" />
    {% endif %}
  </div>
<!-- Posts Grid -->
<div class="row bg-dark text-light p-4 rounded">
  {% for post in category.Blogs.all %}
    <div class="col-md-6 col-lg-4 mb-4">
      <div class="card h-100 bg-secondary text-white border-0 shadow-sm">
        <a href="{% url 'blog:detail' post.slug %}">
          {% if post.img %}
            <img src="{{ post.img.url }}" class="card-img-top" alt="{{ post.title }}">
          {% else %}
            <img src="{% static 'images/default-post.jpg' %}" class="card-img-top" alt="{{ post.title }}">
          {% endif %}
        </a>
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">
            <a href="{% url 'blog:detail' post.slug %}" class="text-white text-decoration-none">{{ post.title }}</a>
          </h5>
          <p class="card-text text-light">
            {{ post.description|truncatewords:20 }}
          </p>
          <div class="mt-auto">
            <a href="{% url 'blog:detail' post.slug %}" class="btn btn-outline-light btn-sm">Read More</a>
          </div>
        </div>
      </div>
    </div>
  {% empty %}
    <div class="col-12">
      <p class="alert alert-warning text-center text-dark bg-light">There are no posts in this category yet.</p>
    </div>
  </div>

  {% endfor %}

{% endblock %}
