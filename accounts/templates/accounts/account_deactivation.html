{% extends 'master.html' %}
{% load static %}

{% block title %}Account Deactivation - ModernBlog{% endblock %}

{% block meta_description %}Temporarily disable your ModernBlog account.{% endblock %}

{% block content %}
<!-- Account Deactivation -->
<section class="account-deactivation py-5">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="card border-0 shadow-sm">
                    <div class="card-body p-5">
                        <!-- Header -->
                        <div class="text-center mb-4">
                            <div class="warning-icon mb-3">
                                <i class="fas fa-exclamation-triangle fa-3x text-warning"></i>
                            </div>
                            <h2 class="fw-bold mb-2">Account Deactivation</h2>
                            <p class="text-muted">Temporarily disable your account</p>
                        </div>

                        <!-- Warning Notice -->
                        <div class="alert alert-warning mb-4">
                            <i class="fas fa-info-circle me-2"></i>
                            <strong>Important:</strong> This will temporarily disable your account. You can reactivate it later by logging in.
                        </div>

                        <!-- Current Account Info -->
                        <div class="account-info mb-4">
                            <h5 class="fw-semibold mb-3">Account Information</h5>
                            <div class="row">
                                <div class="col-md-6">
                                    <p><strong>Email:</strong> {{ user.email }}</p>
                                    <p><strong>Username:</strong> @{{ user.username }}</p>
                                </div>
                                <div class="col-md-6">
                                    <p><strong>Member Since:</strong> {{ user.date_joined|date:"F j, Y" }}</p>
                                    <p><strong>Last Login:</strong> {{ user.last_login|date:"F j, Y g:i A" }}</p>
                                </div>
                            </div>
                        </div>

                        <!-- What Happens -->
                        <div class="what-happens mb-4">
                            <h5 class="fw-semibold mb-3">What happens when you deactivate?</h5>
                            <ul class="list-unstyled">
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    Your profile will be hidden from other users
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    You won't receive notifications or emails
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    Your posts and data will be preserved
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-check text-success me-2"></i>
                                    You can reactivate by logging in anytime
                                </li>
                            </ul>
                        </div>

                        <!-- Deactivation Form -->
                        <form method="post" novalidate>
                            {% csrf_token %}
                            
                            <!-- Confirmation Checkbox -->
                            <div class="mb-4">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="confirmDeactivation" name="confirm_deactivation" required>
                                    <label class="form-check-label" for="confirmDeactivation">
                                        I understand that my account will be temporarily disabled and I can reactivate it later by logging in.
                                    </label>
                                </div>
                            </div>

                            <!-- Reason (Optional) -->
                            <div class="mb-4">
                                <label for="reason" class="form-label">Reason for deactivation (optional)</label>
                                <textarea class="form-control" id="reason" name="reason" rows="3" placeholder="Help us improve by telling us why you're deactivating your account..."></textarea>
                            </div>

                            <!-- Form Actions -->
                            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                <a href="{% url 'accounts:account_settings' %}" class="btn btn-outline-secondary me-md-2">
                                    <i class="fas fa-arrow-left me-2"></i>Cancel
                                </a>
                                <button type="submit" class="btn btn-warning" id="deactivateBtn" disabled>
                                    <i class="fas fa-pause me-2"></i>Deactivate Account
                                </button>
                            </div>
                        </form>

                        <!-- Additional Information -->
                        <div class="mt-4 pt-4 border-top">
                            <h6 class="fw-semibold mb-3">Need Help?</h6>
                            <p class="text-muted mb-0">
                                If you're having issues with your account or need assistance, please 
                                <a href="{% url 'contact:contact' %}">contact our support team</a> 
                                before deactivating your account.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_css %}
<style>
.account-deactivation .card {
    border-radius: 15px;
}

.account-deactivation .warning-icon {
    opacity: 0.8;
}

.account-deactivation .form-control {
    border-radius: 10px;
    border: 2px solid #e9ecef;
    padding: 12px 15px;
    font-size: 16px;
    transition: all 0.3s ease;
}

.account-deactivation .form-control:focus {
    border-color: #ffc107;
    box-shadow: 0 0 0 0.2rem rgba(255, 193, 7, 0.25);
}

.account-deactivation .btn {
    border-radius: 10px;
    padding: 12px 24px;
    font-weight: 600;
    transition: all 0.3s ease;
}

.account-deactivation .btn-warning {
    background: linear-gradient(135deg, #ffc107, #ffb300);
    border: none;
    color: #000;
}

.account-deactivation .btn-warning:hover:not(:disabled) {
    background: linear-gradient(135deg, #ffb300, #ff8f00);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255, 193, 7, 0.3);
}

.account-deactivation .btn-warning:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.account-deactivation .alert-warning {
    background: linear-gradient(135deg, #fff3cd, #ffeaa7);
    border-left: 4px solid #ffc107;
    border-radius: 10px;
}

.account-deactivation .form-check-input:checked {
    background-color: #ffc107;
    border-color: #ffc107;
}

.account-deactivation .list-unstyled li {
    padding: 4px 0;
}

.account-deactivation .account-info {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 10px;
    border-left: 4px solid #6c757d;
}
</style>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const confirmCheckbox = document.getElementById('confirmDeactivation');
    const deactivateBtn = document.getElementById('deactivateBtn');
    
    confirmCheckbox.addEventListener('change', function() {
        deactivateBtn.disabled = !this.checked;
    });
    
    // Form submission confirmation
    document.querySelector('form').addEventListener('submit', function(e) {
        if (!confirm('Are you sure you want to deactivate your account? You can reactivate it anytime by logging in.')) {
            e.preventDefault();
        }
    });
});
</script>
{% endblock %}
